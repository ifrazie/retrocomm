<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retro Messenger - Kiroween Hackathon</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        :root {
            --pager-primary: #1a1a2e;
            --pager-accent: #ff6b9d;
            --pager-display: #00ff41;
            --pager-alert: #ff0000;
            --fax-primary: #000000;
            --fax-text: #000000;
            --fax-paper: #f5f5f0;
            --fax-alert: #ff0000;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .app-container {
            max-width: 1200px;
            width: 100%;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .device-container {
            background: #2a2a2a;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            position: relative;
        }

        .mode-switcher {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .mode-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .mode-btn.active {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
        }

        .mode-btn.pager {
            background: linear-gradient(145deg, #00ff41, #00cc33);
            color: #1a1a2e;
        }

        .mode-btn.fax {
            background: linear-gradient(145deg, #f5f5f0, #d0d0ca);
            color: #000;
        }

        /* PAGER STYLES */
        .pager-device {
            background: linear-gradient(145deg, #1a1a2e, #16213e);
            border-radius: 15px;
            padding: 30px;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.5), 0 10px 30px rgba(0,0,0,0.3);
            border: 3px solid #0f3460;
        }

        .pager-label {
            text-align: center;
            color: #666;
            font-size: 10px;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .pager-screen {
            background: #0a0a0a;
            border: 4px solid #333;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.8);
            min-height: 150px;
        }

        .pager-display {
            font-family: 'Courier New', monospace;
            color: var(--pager-display);
            font-size: 18px;
            line-height: 1.6;
            text-shadow: 0 0 10px var(--pager-display);
            letter-spacing: 1px;
        }

        .pager-message {
            margin-bottom: 15px;
            animation: fadeInGlow 0.5s;
        }

        @keyframes fadeInGlow {
            from {
                opacity: 0;
                text-shadow: 0 0 20px var(--pager-display);
            }
            to {
                opacity: 1;
                text-shadow: 0 0 10px var(--pager-display);
            }
        }

        .pager-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .pager-btn {
            background: linear-gradient(145deg, #2a2a3e, #1a1a2e);
            border: 2px solid #0f3460;
            border-radius: 8px;
            padding: 15px;
            color: #00ff41;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .pager-btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px 3px rgba(0,0,0,0.3);
        }

        .pager-btn:hover {
            background: linear-gradient(145deg, #3a3a4e, #2a2a3e);
            border-color: #00ff41;
        }

        /* FAX STYLES */
        .fax-device {
            background: linear-gradient(145deg, #d0d0ca, #e0e0dc);
            border-radius: 15px;
            padding: 30px;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.1), 0 10px 30px rgba(0,0,0,0.3);
            border: 3px solid #999;
        }

        .fax-header {
            background: #333;
            color: #0f0;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-size: 12px;
            margin-bottom: 20px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.5);
        }

        .fax-paper-slot {
            background: #555;
            border-radius: 5px;
            padding: 5px;
            margin-bottom: 20px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
        }

        .fax-paper {
            background: var(--fax-paper);
            min-height: 400px;
            padding: 20px;
            border-left: 3px dashed #ccc;
            border-right: 3px dashed #ccc;
            position: relative;
            overflow: hidden;
        }

        .fax-message {
            font-family: 'Courier New', monospace;
            color: var(--fax-text);
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px dashed #999;
            animation: printMessage 0.8s;
        }

        @keyframes printMessage {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fax-header-line {
            font-size: 10px;
            margin-bottom: 10px;
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
        }

        /* INPUT AREA */
        .input-area {
            margin-top: 20px;
        }

        .input-container {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .message-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #666;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            background: #fff;
        }

        .send-btn {
            padding: 12px 30px;
            background: linear-gradient(145deg, #ff6b9d, #ff4d7d);
            border: none;
            border-radius: 5px;
            color: white;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .send-btn:hover {
            background: linear-gradient(145deg, #ff4d7d, #ff2d5d);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
        }

        .send-btn:active {
            transform: translateY(0);
        }

        /* WEBHOOK STATUS */
        .webhook-status {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 5px;
            color: #0f0;
            font-size: 12px;
        }

        .webhook-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #0f0;
            box-shadow: 0 0 10px #0f0;
        }

        .webhook-indicator.sending {
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .webhook-spinner {
            width: 16px;
            height: 16px;
            border: 2px solid #0f0;
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* CHATBOT TYPING */
        .typing-indicator {
            color: var(--pager-display);
            font-size: 14px;
            padding: 10px 0;
        }

        .typing-dots span {
            animation: typingDot 1.4s infinite;
            display: inline-block;
        }

        .typing-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingDot {
            0%, 60%, 100% { opacity: 0.3; }
            30% { opacity: 1; }
        }

        .device-label {
            text-align: center;
            font-size: 10px;
            color: #666;
            margin-top: 15px;
            letter-spacing: 2px;
        }

        .alert-led {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--pager-alert);
            display: inline-block;
            margin-right: 5px;
            box-shadow: 0 0 5px var(--pager-alert);
        }

        .alert-led.active {
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0.2; }
        }

        .message-status {
            font-size: 11px;
            color: #888;
            margin-top: 3px;
        }

        .bot-prefix {
            color: var(--pager-accent);
            font-weight: bold;
        }

        /* Scanning animation for FAX */
        .scanning-line {
            position: absolute;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(255,0,0,0.5), transparent);
            animation: scan 2s linear infinite;
        }

        @keyframes scan {
            from { top: 0; }
            to { top: 100%; }
        }

        .powered-by {
            text-align: center;
            color: white;
            margin-top: 20px;
            font-size: 12px;
            opacity: 0.8;
        }

        .powered-by a {
            color: #00ff41;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const EXAMPLE_MESSAGES = [
            { sender: 'Alice', content: "Hey! How's the project?", timestamp: '14:32', type: 'received' },
            { sender: 'Bob', content: 'Running late to meeting', timestamp: '14:45', type: 'received' },
            { sender: 'ChatBot', content: 'Temperature: 72¬∞F, Humidity: 45%', timestamp: '15:00', type: 'bot' },
            { sender: 'Manager', content: 'Send status report ASAP', timestamp: '15:15', type: 'received' },
            { sender: 'System', content: 'Network connectivity restored', timestamp: '15:30', type: 'bot' },
            { sender: 'Alice', content: 'Meeting at 4pm confirmed', timestamp: '15:45', type: 'received' },
            { sender: 'DevOps', content: 'Server deployment successful', timestamp: '16:00', type: 'received' },
            { sender: 'ChatBot', content: 'Reminder: Team standup in 15 mins', timestamp: '16:15', type: 'bot' },
            { sender: 'Bob', content: 'Code review completed', timestamp: '16:30', type: 'received' },
            { sender: 'Security', content: 'Password expiry notice: 7 days', timestamp: '16:45', type: 'received' }
        ];

        const CHATBOT_RESPONSES = {
            'HELP': 'Available commands: STATUS, INFO, TIME, WEATHER',
            'STATUS': 'All systems operational. Webhook connected.',
            'INFO': 'Retro Messenger v1.0 - AWS Kiro Enabled',
            'TIME': new Date().toLocaleTimeString(),
            'WEATHER': 'Temperature: 72¬∞F, Clear skies',
            'DEFAULT': 'Message received. Processing...'
        };

        function App() {
            const [mode, setMode] = useState('pager');
            const [messages, setMessages] = useState(EXAMPLE_MESSAGES);
            const [inputMessage, setInputMessage] = useState('');
            const [webhookStatus, setWebhookStatus] = useState('connected');
            const [isTyping, setIsTyping] = useState(false);
            const [hasNewMessage, setHasNewMessage] = useState(false);
            const messagesEndRef = useRef(null);

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            };

            useEffect(() => {
                scrollToBottom();
            }, [messages]);

            const handleSendMessage = () => {
                if (!inputMessage.trim()) return;

                const newMessage = {
                    sender: 'You',
                    content: inputMessage,
                    timestamp: new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' }),
                    type: 'sent',
                    status: 'sending'
                };

                setMessages([...messages, newMessage]);
                setInputMessage('');
                setWebhookStatus('sending');
                setHasNewMessage(true);

                // Simulate webhook delivery
                setTimeout(() => {
                    setMessages(prev => prev.map((msg, idx) => 
                        idx === prev.length - 1 ? { ...msg, status: 'delivered' } : msg
                    ));
                    setWebhookStatus('connected');

                    // Trigger chatbot response
                    handleChatbotResponse(inputMessage);
                }, 1500);
            };

            const handleChatbotResponse = (userMessage) => {
                setIsTyping(true);

                setTimeout(() => {
                    setIsTyping(false);
                    const messageUpper = userMessage.toUpperCase();
                    let response = CHATBOT_RESPONSES.DEFAULT;

                    Object.keys(CHATBOT_RESPONSES).forEach(key => {
                        if (messageUpper.includes(key)) {
                            response = CHATBOT_RESPONSES[key];
                        }
                    });

                    const botMessage = {
                        sender: 'ChatBot',
                        content: response,
                        timestamp: new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' }),
                        type: 'bot'
                    };

                    setMessages(prev => [...prev, botMessage]);
                    setHasNewMessage(true);
                }, 2000);
            };

            const handleClearMessages = () => {
                setMessages([]);
                setHasNewMessage(false);
            };

            const renderPagerView = () => (
                <div className="pager-device">
                    <div className="pager-label">
                        ‚îÅ‚îÅ‚îÅ RETROPAGER 9000 ‚îÅ‚îÅ‚îÅ MADE IN JAPAN ‚îÅ‚îÅ‚îÅ
                    </div>
                    
                    <div className="pager-screen">
                        <div className="pager-display">
                            {messages.length === 0 ? (
                                <div>NO MESSAGES</div>
                            ) : (
                                messages.slice(-5).map((msg, idx) => (
                                    <div key={idx} className="pager-message">
                                        <div>
                                            {msg.type === 'bot' && <span className="bot-prefix">[BOT] </span>}
                                            MSG #{messages.length - 5 + idx + 1} FROM: {msg.sender}
                                        </div>
                                        <div>TIME: {msg.timestamp}</div>
                                        <div>TEXT: {msg.content}</div>
                                        {msg.status && (
                                            <div className="message-status">
                                                [{msg.status.toUpperCase()}]
                                            </div>
                                        )}
                                        <div>‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ</div>
                                    </div>
                                ))
                            )}
                            {isTyping && (
                                <div className="typing-indicator">
                                    <span className="bot-prefix">[BOT] </span>TYPING
                                    <span className="typing-dots">
                                        <span>.</span><span>.</span><span>.</span>
                                    </span>
                                </div>
                            )}
                            <div ref={messagesEndRef} />
                        </div>
                    </div>

                    <div className="pager-controls">
                        <button className="pager-btn" onClick={() => window.scrollTo(0, 0)}>‚ñ≤ UP</button>
                        <button className="pager-btn" onClick={() => setMode('fax')}>üì† FAX</button>
                        <button className="pager-btn" onClick={() => window.scrollTo(0, document.body.scrollHeight)}>‚ñº DOWN</button>
                        <button className="pager-btn" onClick={handleClearMessages}>‚úï CLEAR</button>
                        <button className="pager-btn" disabled>‚öô MENU</button>
                        <button className="pager-btn" onClick={() => setHasNewMessage(false)}>‚úì READ</button>
                    </div>

                    <div className="input-area">
                        <div className="input-container">
                            <input
                                type="text"
                                className="message-input"
                                placeholder="Type message..."
                                value={inputMessage}
                                onChange={(e) => setInputMessage(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}
                            />
                            <button className="send-btn" onClick={handleSendMessage}>
                                SEND
                            </button>
                        </div>
                        <div className="webhook-status">
                            <span className={`alert-led ${hasNewMessage ? 'active' : ''}`}></span>
                            {webhookStatus === 'sending' ? (
                                <>
                                    <div className="webhook-spinner"></div>
                                    <span>WEBHOOK: TRANSMITTING...</span>
                                </>
                            ) : (
                                <>
                                    <div className="webhook-indicator"></div>
                                    <span>WEBHOOK: CONNECTED | AWS KIRO ACTIVE</span>
                                </>
                            )}
                        </div>
                    </div>

                    <div className="device-label">
                        MODEL: RP-9000 | SN: 19891225 | FCC ID: RETRO2025
                    </div>
                </div>
            );

            const renderFaxView = () => (
                <div className="fax-device">
                    <div className="fax-header">
                        <span className={`alert-led ${hasNewMessage ? 'active' : ''}`}></span>
                        FACSIMILE TRANSCEIVER | AWS KIRO WEBHOOK ENABLED
                    </div>

                    <div className="fax-paper-slot">
                        <div className="fax-paper">
                            {webhookStatus === 'sending' && <div className="scanning-line"></div>}
                            
                            {messages.length === 0 ? (
                                <div style={{textAlign: 'center', padding: '40px', color: '#999'}}>
                                    NO FAX RECEIVED
                                </div>
                            ) : (
                                messages.map((msg, idx) => (
                                    <div key={idx} className="fax-message">
                                        <div className="fax-header-line">
                                            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
                                        </div>
                                        <div className="fax-header-line">
                                            FROM: {msg.sender.toUpperCase()}
                                            <br />
                                            DATE: {new Date().toLocaleDateString()} {msg.timestamp}
                                            <br />
                                            PAGE: {idx + 1} OF {messages.length}
                                            {msg.type === 'bot' && ' | TYPE: AUTOMATED'}
                                        </div>
                                        <div className="fax-header-line">
                                            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
                                        </div>
                                        <div style={{marginTop: '15px', marginBottom: '15px'}}>
                                            {msg.content}
                                        </div>
                                        {msg.status && (
                                            <div style={{fontSize: '10px', color: '#666'}}>
                                                STATUS: {msg.status.toUpperCase()}
                                            </div>
                                        )}
                                    </div>
                                ))
                            )}
                            {isTyping && (
                                <div className="fax-message" style={{color: '#666'}}>
                                    <div className="fax-header-line">
                                        INCOMING TRANSMISSION...
                                    </div>
                                    <div className="typing-dots">
                                        PRINTING<span>.</span><span>.</span><span>.</span>
                                    </div>
                                </div>
                            )}
                            <div ref={messagesEndRef} />
                        </div>
                    </div>

                    <div className="input-area">
                        <div className="input-container">
                            <input
                                type="text"
                                className="message-input"
                                placeholder="Type message to send..."
                                value={inputMessage}
                                onChange={(e) => setInputMessage(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}
                            />
                            <button className="send-btn" onClick={handleSendMessage}>
                                TRANSMIT
                            </button>
                        </div>
                        <div className="webhook-status">
                            {webhookStatus === 'sending' ? (
                                <>
                                    <div className="webhook-spinner"></div>
                                    <span>TRANSMITTING VIA WEBHOOK...</span>
                                </>
                            ) : (
                                <>
                                    <div className="webhook-indicator"></div>
                                    <span>LINE READY | WEBHOOK ACTIVE | AWS KIRO</span>
                                </>
                            )}
                        </div>
                    </div>

                    <div className="pager-controls">
                        <button className="pager-btn" onClick={() => setMode('pager')}>üìü PAGER</button>
                        <button className="pager-btn" onClick={handleClearMessages}>üóë CLEAR</button>
                        <button className="pager-btn" onClick={() => setHasNewMessage(false)}>‚úì READ</button>
                    </div>

                    <div className="device-label">
                        FAX-2000 | THERMAL PRINTER | 9600 BAUD MODEM
                    </div>
                </div>
            );

            return (
                <div className="app-container">
                    <div className="header">
                        <h1>‚ö° RETRO MESSENGER ‚ö°</h1>
                        <div className="subtitle">
                            Modern Messaging Reimagined with 1980s Tech
                        </div>
                    </div>

                    <div className="device-container">
                        <div className="mode-switcher">
                            <button 
                                className={`mode-btn pager ${mode === 'pager' ? 'active' : ''}`}
                                onClick={() => setMode('pager')}
                            >
                                üìü Pager Mode
                            </button>
                            <button 
                                className={`mode-btn fax ${mode === 'fax' ? 'active' : ''}`}
                                onClick={() => setMode('fax')}
                            >
                                üì† Fax Mode
                            </button>
                        </div>

                        {mode === 'pager' ? renderPagerView() : renderFaxView()}
                    </div>

                    <div className="powered-by">
                        üéÉ Kiroween Hackathon 2025 | Powered by <a href="https://aws.amazon.com" target="_blank">AWS Kiro</a> Webhooks &amp; Chatbots
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>